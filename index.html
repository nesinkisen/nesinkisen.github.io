<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE-Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>stock</title>
    </head>
    <body>
        <button onclick="buyFunc()">Set5</button>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="//sdk-cdn.mypurecloud.com/client-apps/1.3.0/purecloud-client-app-sdk.js"></script>
        <script src="https://sdk-cdn.mypurecloud.com/javascript/147.0.0/purecloud-platform-client-v2.min.js"></script>

        <script type="text/javascript">
            // Obtain a reference to the platformClient object
            const platformClient = require('platformClient');
        </script>

        <script>
            var lifecycleStatusMessageTitle = 'Lifecycle Demo App';
            var lifecycleStatusMessageId = 'lifecycleDemo-statusMsg';
            var blurCount = 0;
    
            $( document ).ready(function() 
            {
                const client = platformClient.ApiClient.instance;

                client.config.refresh_access_token = false;
                client.loginCodeAuthorizationGrant(clientId,clientSecret,authCode,redirectUri)
                .then((authData) => {
                    refreshToken = authData.refreshToken;
                    tokenExpiryTime = authData.tokenExpiryTime;
                    // Do authenticated things


                client.setEnvironment(platformClient.PureCloudRegionHosts.us_east_1); // Genesys Cloud region

                // Manually set auth token or use loginImplicitGrant(...) or loginClientCredentialsGrant(...)
                client.setAccessToken(refreshToken);

                let apiInstance = new platformClient.UsersApi();

                let opts = { 
                "expand": ["expand_example"], // [String] | Which fields, if any, to expand.
                "integrationPresenceSource": "integrationPresenceSource_example" // String | Get your presence for a given integration. This parameter will only be used when presence is provided as an expand.
                };

                // Get current user details.
                apiInstance.getUsersMe(opts)
                .then((data) => {
                    console.log(`getUsersMe success! data: ${JSON.stringify(data, null, 2)}`);
                })
                .catch((err) => {
                    console.log("There was a failure calling getUsersMe");
                    console.error(err);
                });

            })
                .catch((err) => {
                    // Handle failure response
                    console.log(err);
                });
            });
        </script>        
    </body>
    
</html> 